<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>tmp</title>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" type="text/css" href="../css/common.css">
</head>
<body>

<div id="app">
    <el-button type="primary" @click="send">send</el-button>
</div>

</body>
</html>
<script src="../js/jquery.min.js"></script>
<script src="../js/vue.js"></script>
<script src="../js/func.js"></script>
<script src="../js/index.js"></script>
<script>
    let ws = new WebSocket('ws://127.0.0.1:9501?id=91')
    ws.onopen = function (evt) {
        console.log('开启'+evt)
    }
    ws.onclose = function (evt) {
        console.log('关闭'+evt)
    }
    ws.onmessage = function (evt) {
        let data = evt.data
        console.log('消息'+data)
    }
    ws.onerror = function (evt) {
        console.error('出错---'+evt)
    }
    new Vue({
        el: '#app',
        data: {},
        methods: {
            send() {
                ws.send(JSON.stringify({action: 'test', content: 'hello world'}))
            }
        },
        mounted() {
            this.$nextTick(e=>{
                //初始化
                that = this;
                loginState()
            })
        }
    })
</script>